<!DOCTYPE html>
<html lang="tr" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>Adalya Company - Giriş</title>

  <style>
    :root{
      --gold:#d4af37;
      --gold-dark:#b8941f;
      --bg-light:#f5f7fa;
      --surface:#ffffff;
      --text:#2c3e50;
      --error:#e74c3c;
      --border:#e0e0e0;
    }
    *{box-sizing:border-box;margin:0;padding:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif}
    body{
      min-height:100vh;display:flex;align-items:center;justify-content:center;
      background:var(--bg-light);color:var(--text);padding:16px
    }
    .login-box{
      width:100%;max-width:380px;background:var(--surface);
      border-radius:20px;padding:40px 24px;
      box-shadow:0 8px 30px rgba(0,0,0,.08);text-align:center
    }
    .logo-box{
      width:120px;height:120px;margin:0 auto 12px;border-radius:50%;
      background:#fff;border:4px solid var(--gold);
      display:flex;align-items:center;justify-content:center;overflow:hidden
    }
    .logo-box img{width:88%;height:88%;object-fit:contain}
    @media (min-width:480px){.logo-box{width:144px;height:144px}}

    .brand{display:flex;flex-direction:column;gap:4px;margin-bottom:24px}
    .brand .company{font-size:1.1rem;font-weight:700;color:var(--text)}
    .brand .form-title{font-size:1.25rem;font-weight:800;color:var(--gold)}

    input{
      width:100%;padding:14px 16px;margin-bottom:16px;
      background:#fff;border:1.5px solid var(--border);
      border-radius:12px;font-size:1rem;transition:.3s
    }
    input:focus{outline:none;border-color:var(--gold);box-shadow:0 0 0 3px rgba(212,175,55,.2)}
    button{
      width:100%;padding:14px;background:var(--gold);color:#fff;
      font-size:1rem;font-weight:700;border:none;border-radius:12px;
      cursor:pointer;transition:.3s
    }
    button:hover{background:var(--gold-dark);transform:translateY(-2px)}
    .error{display:none;color:var(--error);font-size:.85rem;margin-top:-10px;margin-bottom:10px}

    .lang-float{
      position:fixed;bottom:16px;right:16px;z-index:999;
      display:flex;gap:6px;background:rgba(255,255,255,.85);
      backdrop-filter:blur(6px);padding:6px;border-radius:30px;
      box-shadow:0 4px 18px rgba(0,0,0,.15)
    }
    .lang-float button{
      min-width:64px;height:40px;border:none;border-radius:20px;
      font-size:.9rem;font-weight:700;cursor:pointer;
      background:#fff;color:var(--text);transition:transform .2s
    }
    .lang-float button:active{transform:scale(.92)}
    .lang-float button.active{background:var(--gold);color:#fff}
  </style>
</head>

<body>
<div class="login-box">
  <div class="logo-box">
    <img src="images/adalyalogo.png" alt="Adalya Logo">
  </div>

  <div class="brand">
    <div class="company">Adalya Company</div>
    <div class="form-title">Sipariş Formu</div>
  </div>

  <input type="text" id="user" placeholder="Kullanıcı adı">
  <input type="password" id="pass" placeholder="Şifre">

  <div class="error" id="msg">Kullanıcı adı veya şifre yanlış!</div>

  <button onclick="giris()">Giriş</button>
</div>

<div class="lang-float">
  <button class="active" onclick="setLang('tr')">Türkçe</button>
  <button onclick="setLang('ar')">العربية</button>
  <button onclick="setLang('en')">English</button>
</div>

<script>
// KULLANICI LİSTESİ - GitHub'dan çekilecek
const USERS_URL = 'https://raw.githubusercontent.com/XwinSherin/adalyacompany/main/users.json';

// Yerel kullanıcı listesi (backup olarak)
const localUsers = [
  { user: "ahmet", pass: "1234" },
  { user: "mehmet", pass: "1234" },
  { user: "ayse", pass: "1234" }
];

function setLang(lang){
  localStorage.setItem('lang', lang);
  document.documentElement.lang = lang;
  document.documentElement.dir = (lang === 'ar' ? 'rtl' : 'ltr');
  
  const texts = {
    tr: {
      title: "Adalya Company - Giriş",
      company: "Adalya Company", 
      formTitle: "Sipariş Formu",
      userPlaceholder: "Kullanıcı adı",
      passPlaceholder: "Şifre",
      error: "Kullanıcı adı veya şifre yanlış!",
      login: "Giriş"
    },
    ar: {
      title: "أداليا - تسجيل الدخول",
      company: "شركة أداليا",
      formTitle: "نموذج الطلب", 
      userPlaceholder: "اسم المستخدم",
      passPlaceholder: "كلمة المرور",
      error: "اسم المستخدم أو كلمة المرور خاطئة!",
      login: "دخول"
    },
    en: {
      title: "Adalya Company - Login",
      company: "Adalya Company",
      formTitle: "Order Form",
      userPlaceholder: "Username", 
      passPlaceholder: "Password",
      error: "Wrong username or password!",
      login: "Login"
    }
  };
  
  const t = texts[lang];
  document.title = t.title;
  document.querySelector('.company').textContent = t.company;
  document.querySelector('.form-title').textContent = t.formTitle;
  document.getElementById('user').placeholder = t.userPlaceholder;
  document.getElementById('pass').placeholder = t.passPlaceholder;
  document.getElementById('msg').textContent = t.error;
  document.querySelector('button[onclick="giris()"]').textContent = t.login;
  
  document.querySelectorAll('.lang-float button').forEach(btn => {
    btn.classList.remove('active');
  });
  event.target.classList.add('active');
}

async function giris(){
  const u = document.getElementById('user').value.trim();
  const p = document.getElementById('pass').value.trim();
  const msg = document.getElementById('msg');
  
  if (!u || !p) {
    msg.textContent = "Kullanıcı adı ve şifre gerekli!";
    msg.style.display = 'block';
    return;
  }

  let users = [];
  
  try {
    // Önce GitHub'dan kullanıcıları çek
    const res = await fetch(USERS_URL);
    if (res.ok) {
      users = await res.json();
    } else {
      throw new Error('GitHub bağlantı hatası');
    }
  } catch (err) {
    // GitHub'dan çekilemezse yerel listeyi kullan
    console.log('GitHub bağlantı hatası, yerel kullanıcılar kullanılıyor');
    users = localUsers;
  }

  const found = users.find(x => x.user === u && x.pass === p);
  
  if (found) {
    sessionStorage.setItem('currentUser', u);
    window.location.href = 'siparis.html'; // Sipariş sayfasına yönlendir
  } else {
    msg.style.display = 'block';
  }
}

// Sayfa yüklendiğinde dili ayarla
document.addEventListener('DOMContentLoaded', function() {
  setLang(localStorage.getItem('lang') || 'tr');
});
</script>
</body>
</html>
